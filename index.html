<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jukebox Slave - Retro Music Player</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

    <!-- Location Screen -->
    <div id="locationScreen" class="screen">
        <div class="location-container">
            <div class="retro-header">
                <h1><i class="fas fa-map-marker-alt"></i> LOCATION VERIFICATION</h1>
                <p class="subtitle">We need to verify you're at the venue</p>
            </div>
            <div class="location-info">
                <div class="venue-info">
                    <h3><i class="fas fa-building"></i> <span id="venueName">8-Bit Bar</span></h3>
                    <p id="venueAddress">123 Example Street, Sydney, NSW, Australia</p>
                </div>
                <div class="permission-note">
                    <p><i class="fas fa-info-circle"></i> We're automatically checking your location. Please allow location access when prompted.</p>
                </div>
            </div>
            <div id="locationChecking" class="location-checking">
                <div class="spinner"></div>
                <p>Checking your location...</p>
            </div>
            <button id="requestLocationBtn" class="retro-btn hidden">
                <i class="fas fa-redo"></i> TRY AGAIN
            </button>
            <button id="debugLocationBtn" class="retro-btn-secondary" style="margin-top: 10px;">
                <i class="fas fa-bug"></i> DEBUG LOCATION
            </button>
            <div id="locationError" class="error-message hidden"></div>
            <div id="locationStatus" class="location-status hidden">
                <div class="status-info">
                    <p id="distanceInfo"></p>
                    <p id="statusMessage"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Screen -->
    <div id="loginScreen" class="screen hidden">
        <div class="login-container">
            <div class="retro-header">
                <h1><i class="fas fa-compact-disc"></i> JUKEBOX SLAVE</h1>
                <p class="subtitle">Enter your credentials to access the music</p>
            </div>
            <form id="loginForm" class="auth-form">
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" id="username" placeholder="Username" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="password" placeholder="Password" required>
                </div>
                <button type="submit" class="retro-btn">
                    <i class="fas fa-play"></i> ENTER JUKEBOX
                </button>
            </form>
            <div id="errorMessage" class="error-message"></div>
        </div>
    </div>

    <!-- Main App Screen -->
    <div id="mainScreen" class="screen">
        <!-- Always Visible Back Button -->
        <button id="fixedBackBtn" class="back-button-fixed hidden">
            <i class="fas fa-arrow-left"></i> Back
        </button>
        
        <!-- App Title -->
        <div class="app-title">
            <h1>8 Bit Bar Jukebox</h1>
        </div>

        <!-- Top Section: Now Playing & Playlist (Always Visible) -->
        <div class="top-section">
            <!-- Now Playing Section -->
            <div class="now-playing-section">
                <div class="now-playing-bar">
                    <div class="playing-label">Playing</div>
                    <div class="current-song" id="currentSongDisplay">Song - Artist</div>
                </div>
            </div>

            <!-- Playlist Section -->
            <div class="playlist-section">
                <div class="playlist-header">playlist</div>
                <div class="playlist-container" id="playlistContainer">
                    <!-- Playlist items will be shown here -->
                </div>
            </div>
        </div>

        <!-- Bottom Section: Albums or Songs View -->
        <div class="bottom-section">
            <!-- Navigation Tabs -->
            <div class="view-tabs">
                <button id="albumsTab" class="view-tab active">
                    <i class="fas fa-music"></i> Albums
                </button>
                <button id="songsTab" class="view-tab">
                    <i class="fas fa-list"></i> Songs
                </button>
            </div>

            <!-- Albums View -->
            <div id="albumsView" class="content-view active">
                <!-- Search Bar for Albums -->
                <div class="albums-search-section">
                    <div class="search-input-container">
                        <i class="fas fa-search"></i>
                        <input type="text" id="albumsSearchInput" placeholder="Search albums and songs...">
                        <button id="clearAlbumsSearchBtn" class="clear-search-btn hidden">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Albums Grid -->
                <div class="albums-grid" id="albumsGrid">
                    <!-- Albums will be loaded here -->
                </div>
            </div>

            <!-- Songs View -->
            <div id="songsView" class="content-view">
                <!-- Search Bar for Songs -->
                <div class="songs-search-section">
                    <div class="search-input-container">
                        <i class="fas fa-search"></i>
                        <input type="text" id="songsSearchInput" placeholder="Search songs...">
                        <button id="clearSongsSearchBtn" class="clear-search-btn hidden">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Songs List -->
                <div class="songs-list" id="songsList">
                    <!-- Songs will be loaded here -->
                </div>
            </div>

            <!-- Album Detail View (Hidden by default) -->
            <div id="albumDetailView" class="content-view">
                <div class="album-detail-header">
                    <h2 id="albumDetailTitle">Album</h2>
                </div>
                <div class="album-info">
                    <div class="album-cover">
                        <i class="fas fa-music"></i>
                    </div>
                    <div class="album-details">
                        <p id="albumArtist">Artist</p>
                        <h3 id="albumName">Album Name</h3>
                    </div>
                </div>
                <div class="album-songs">
                    <h3><i class="fas fa-list-music"></i> Songs</h3>
                    <div id="albumSongsList" class="songs-list">
                        <!-- Album songs will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Control buttons (hidden but functional) -->
        <div class="control-buttons hidden">
            <button id="logoutBtn" class="logout-btn" title="Logout">
                <i class="fas fa-sign-out-alt"></i>
            </button>
            <button id="refreshPlaylist" class="refresh-btn" title="Refresh playlist">
                <i class="fas fa-sync-alt"></i>
            </button>
        </div>
    </div>


    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner hidden">
        <div class="spinner"></div>
        <p>Loading music...</p>
    </div>

    <script src="script.js"></script>
</body>
</html>